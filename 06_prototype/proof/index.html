<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.92.1">
<meta name=description content>
<link rel=icon href=/Automated-Farming/images/favicon.png type=image/png>
<title>A - Proof of Concept - Automated Farming</title>
<link href=/Automated-Farming/css/nucleus.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/fontawesome-all.min.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/hybrid.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/featherlight.min.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/perfect-scrollbar.min.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/auto-complete.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/atom-one-dark-reasonable.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/theme.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/tabs.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/hugo-theme.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/theme-blue.css?1643638253 rel=stylesheet>
<link href=/Automated-Farming/css/foo.css?1643638253 rel=stylesheet><link href=/Automated-Farming/css/bar.css?1643638253 rel=stylesheet>
<script src=/Automated-Farming/js/jquery-3.3.1.min.js?1643638253></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
</head>
<body data-url=/Automated-Farming/06_prototype/proof/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a id=logo href=https://me459ku.github.io/Automated-Farming>
<font size=6>Automated Farming</font>
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=/Automated-Farming/js/lunr.min.js?1643638253></script>
<script type=text/javascript src=/Automated-Farming/js/auto-complete.js?1643638253></script>
<script type=text/javascript>var baseurl="https://me459ku.github.io/Automated-Farming"</script>
<script type=text/javascript src=/Automated-Farming/js/search.js?1643638253></script>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/Automated-Farming/02_missionstatement/ title="1- Problem Search" class=dd-item>
<a href=/Automated-Farming/02_missionstatement/>
1- Problem Search
</a>
<ul>
<li data-nav-id=/Automated-Farming/02_missionstatement/missionstatement/ title="Mission Statement" class=dd-item>
<a href=/Automated-Farming/02_missionstatement/missionstatement/>
Mission Statement
</a>
</li>
</ul>
</li>
<li data-nav-id=/Automated-Farming/03_conceptdev/ title="2- Concept Development" class=dd-item>
<a href=/Automated-Farming/03_conceptdev/>
2- Concept Development
</a>
<ul>
<li data-nav-id=/Automated-Farming/03_conceptdev/conceptgen/ title="A - Concept Generations" class=dd-item>
<a href=/Automated-Farming/03_conceptdev/conceptgen/>
A - Concept Generations
</a>
</li>
<li data-nav-id=/Automated-Farming/03_conceptdev/prodspecs/ title="B - Product Specifications" class=dd-item>
<a href=/Automated-Farming/03_conceptdev/prodspecs/>
B - Product Specifications
</a>
</li>
<li data-nav-id=/Automated-Farming/03_conceptdev/functional-decomposition/ title="C - Functional Decomposition" class=dd-item>
<a href=/Automated-Farming/03_conceptdev/functional-decomposition/>
C - Functional Decomposition
</a>
</li>
</ul>
</li>
<li data-nav-id=/Automated-Farming/04_conceptsel/ title="3- Concept Selection" class=dd-item>
<a href=/Automated-Farming/04_conceptsel/>
3- Concept Selection
</a>
<ul>
<li data-nav-id=/Automated-Farming/04_conceptsel/finalselection/ title="Final Concept Selection" class=dd-item>
<a href=/Automated-Farming/04_conceptsel/finalselection/>
Final Concept Selection
</a>
</li>
</ul>
</li>
<li data-nav-id=/Automated-Farming/05_farmbot/ title="4- Farmbot" class=dd-item>
<a href=/Automated-Farming/05_farmbot/>
4- Farmbot
</a>
<ul>
<li data-nav-id=/Automated-Farming/05_farmbot/econanalysis/ title="A - Economical Analysis" class=dd-item>
<a href=/Automated-Farming/05_farmbot/econanalysis/>
A - Economical Analysis
</a>
</li>
<li data-nav-id=/Automated-Farming/05_farmbot/bom/ title="B - Bill of material" class=dd-item>
<a href=/Automated-Farming/05_farmbot/bom/>
B - Bill of material
</a>
</li>
<li data-nav-id=/Automated-Farming/05_farmbot/weederprob/ title="C - Weeder Problem" class=dd-item>
<a href=/Automated-Farming/05_farmbot/weederprob/>
C - Weeder Problem
</a>
</li>
</ul>
</li>
<li data-nav-id=/Automated-Farming/06_prototype/ title="5- Prototype" class="dd-item
parent">
<a href=/Automated-Farming/06_prototype/>
5- Prototype
</a>
<ul>
<li data-nav-id=/Automated-Farming/06_prototype/proof/ title="A - Proof of Concept" class="dd-item active">
<a href=/Automated-Farming/06_prototype/proof/>
A - Proof of Concept
</a>
</li>
<li data-nav-id=/Automated-Farming/06_prototype/newdesign/ title="B - New Design" class=dd-item>
<a href=/Automated-Farming/06_prototype/newdesign/>
B - New Design
</a>
</li>
<li data-nav-id=/Automated-Farming/06_prototype/bom/ title="C - Bill of Material" class=dd-item>
<a href=/Automated-Farming/06_prototype/bom/>
C - Bill of Material
</a>
</li>
</ul>
</li>
<li data-nav-id=/Automated-Farming/07_concludingremarks/ title="6- Concluding Remarks" class=dd-item>
<a href=/Automated-Farming/07_concludingremarks/>
6- Concluding Remarks
</a>
</li>
</ul>
<section id=shortcuts>
<h3>More</h3>
<ul>
<li>
<a class=padding href=http://www.kuniv.edu.kw/><i class="fas fa-building"></i> Kuwait University</a>
</li>
<li>
<a class=padding href=https://me459ku.github.io/><i class="fas fa-cubes"></i> ME459 Engineering Design</a>
</li>
<li>
<a class=padding href=https://gohugo.io/><i class="fas fa-bookmark"></i> Other Link 1</a>
</li>
</ul>
</section>
<section id=footer>
<p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
A - Proof of Concept
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#assembly>Assembly</a></li>
<li><a href=#computer-program>Computer Program</a></li>
<li><a href=#testing-and-results>Testing and Results</a></li>
<li><a href=#proof-of-concept---weed-elimination>Proof of concept - weed elimination</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
</div>
<div id=body-inner>
<h1>
A - Proof of Concept
</h1>
<p>To validate the proposed solution with the limited budget constraint, it was decided to use a 3D printer to replication a Farmbot. The 3D printer was modified to have a webcam attached to it to be used as the weed scanning tool, and the laser to be used in the finalized Farmbot was also attached to the 3D printer to be a part of the prototype.</p>
<p><img src=/images/Proof1.png alt></p>
<p>The figure above shows the exact model used in the fabrication of the prototype and the choice of a 3D printer was obvious as it has a 3 axis gantry system
which is exactly what Farmbot uses but this has a much smaller
form factor and is widely available and more affordable. The
reasons behind why this exact model was chosen are due to its low price and the fact that it has an open-source microcontroller and software that allowed the team to fully control the 3D printer through a serial connection with a USB cable. Since this is not a growing area and having weeds will cause a mess the weed was replaced with a red circle and a red whiteboard magnet such as the one presented in the figure below was used
<img src=/images/Proof2.png alt></p>
<h3 id=assembly>Assembly</h3>
<p>As mentioned previously the 3D printer had a camera and a laser module attached to it. A custom-designed mounting bracket was designed specifically for this application and then it was printed using the 3D printer.</p>
<p><img src=/images/Proof3.png alt></p>
<p>The custom-designed mount is shown in the figure above. The mount allowed for a seamless mounting arrangement that did not impair nor interfere with the 3D printing functionality.</p>
<p><img src=/images/Proof4.png alt></p>
<p>The figure above shows the completed assembly of the prototype used for the purpose of the validation process.</p>
<h3 id=computer-program>Computer Program</h3>
<p>To control the assembly a computer program was developed to drive the mechanisms a satisfy the required physical objective, which is to the red magnet representing a weed and pinpoint its exact location and then triggers the laser and moves the laser around the red magnet to make sure that if it was a weed that it is most likely to be burnt. For the purpose of this project, MATLAB was since it was the programming tool with which the team members are familiar using.</p>
<p><img src=/images/Proof5.png alt></p>
<p>The logic for the computer program used to control the system is presented in the diagram in the figure above. When the device is first turned on it will calibrate its location and then go to the idle home location waiting for a command to search for weeds. The search for weeds command can be triggered either by a specific event such as time i.e. 7:00 am every Sunday or manually. After the scan command is triggered the computer software will drive the motors to move the camera to multiple locations to take a snapshot of the bed which in this case represents the growing area, then the previously taken images are stitched together to make the full image of the bed as shown below</p>
<p><img src=/images/Proof6.png alt></p>
<p>The figure above shows the images taken at a different location and then the stitched version. After stitching the images, the final stitched image is then referenced to real-life coordinates of the bed. After having a way to convert pixel location to mm location on the bed of the 3D printer, the image is analyzed and a mask is applied where anything that is red in the image is then turned into white with everything else being black as shown in the figure below.</p>
<p><img src=/images/Proof7.png alt></p>
<p>In the figure above it shows the masked red regions with boxes around them. The reason for the boxes is to be able to get the XY pixel location for the red magnets and to eliminate the noise in the image by only considering the boxes that meet certain criteria (in this case the area of the box) and reject all other boxes. The information of all confirmed boxes is then stored in a matrix format. After location each red magnet the 3D printer is then instructed to take the camera to the location of the first red dot in the matrix of red dots (order is not important in this case), the reason the camera is first taken to the red magnet before the laser is to pinpoint the exact location of the red magnet with a certain accuracy which reduces any errors from the previous location estimation process in a dramatic manner.
The figure above shows the location of the red magnet before the enhancement and after and as it can be concluded that a great deal of correction has taken place. After doing so the distance from the head of the laser and the camera lens is known (in this case it is 48mm in the X and 23 mm in the Y). The printer will bring the lens of the laser to the center of the red magnet and then trigger the laser.
In the figure the pattern of which the laser will burn the weed is shown, the reason this pattern (The Archimedean Spiral) was chosen was that the magnet was circular and it was fairly simple to manipulate without causing any damage to the bed of the 3D printer, another pattern is used when a weed is to be eliminated)</p>
<p><img src=/images/Proof8.png alt></p>
<h4 id=pseudo-code>Pseudo-code</h4>
<p>After describing what happens in each operation of the code the pseudo-code is presented for each function below (Taking into consideration)</p>
<h5 id=initiation>Initiation</h5>
<pre tabindex=0><code>Establish connection to 3D printer
Open communication line to 3D printer
Connect to &amp; open webcam
Command printer to go home (Calibrate)
Command printer to go to home2 (MAX Z MID (X,Y))
</code></pre><h5 id=scanning-the-area>Scanning the area</h5>
<pre tabindex=0><code>Send Camera to Corner 1
wait for printer to move Camera
Take Snapshot1
Send Camera to Corner 2
wait for printer to move Camera
Take Snapshot2
Send Camera to Corner 3
wait for printer to move Camera
Take Snapshot3
Send Camera to Corner 4
wait for printer to move Camera
Take Snapshot4
Create empty canvas of predetermined size (array) Fille empty canvas
Top left corner with Snapshot1
Top right corner with Snapshot2
Bottom right corner with Snapshot3
Bottom left corner with Snapshot4
Convert stitch image array to image type
Crop stitched image to exclude undesired region Reference cropped image to real bed dimensions

</code></pre><h5 id=detecting-red-dots>Detecting Red Dots</h5>
<pre tabindex=0><code class=language-Create data-lang=Create>for number of boxes
    if box area &gt; known area in pixels of red magnet - 15%
        store box coordinates
    end
end
for number of selected boxes
create array with of X and Y location after referencing + Static error
end
</code></pre><h5 id=honing-in-on-red-dots>Honing In On Red Dots</h5>
<pre tabindex=0><code>Send printer to X and Y location of red dot (previously corrected) Take printer to specified height
Take a snapshot.X
Locate circle (Xc,Yc,R)
while desired accuracy &lt; current accuracy
    move printer by 0.1(Xd-Xc)
    get new circle location (X,Y,R)
    if x is at center (with desired accuracy (factor))
        break
     end
end

Repeat above for Y

Store final XYlocation of red magnet
</code></pre><h5 id=eliminating-the-red-dot>Eliminating The Red Dot</h5>
<pre tabindex=0><code>Send printer to XY location of magnet
Generate archimedean from center of circle to edge Turn on Laser
Move printer following spiral path
Turn off Laser
</code></pre><h3 id=testing-and-results>Testing and Results</h3>
<p>In the figure below the red magnets used are shown before and after the burning process using the laser</p>
<p><img src=/images/Proof9.png alt></p>
<p>As it can be seen that the laser was capable of melting the plastic cover of the white board magnet indicating that it will be powerful enough to burn organic leafs which will also be demonstrated in the following section of the report. The pattern used for attack (Archamedian spiral) can also be seen in the second burnt magnet on the right hand side.</p>
<h3 id=proof-of-concept---weed-elimination>Proof of concept - weed elimination</h3>
<p>In this section the results for burning an actual weed are shown. In the first figure below a small plant demonstrating a weed (in size) is used in a small, a perfectly healthy small plant.
<img src=/images/Proof10.png alt></p>
<p>The plant in the figure above will go throught the burning process and the results are shown below in the next figure.</p>
<p><img src=/images/Proof11.png alt></p>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/Automated-Farming/js/clipboard.min.js?1643638253></script>
<script src=/Automated-Farming/js/perfect-scrollbar.min.js?1643638253></script>
<script src=/Automated-Farming/js/perfect-scrollbar.jquery.min.js?1643638253></script>
<script src=/Automated-Farming/js/jquery.sticky.js?1643638253></script>
<script src=/Automated-Farming/js/featherlight.min.js?1643638253></script>
<script src=/Automated-Farming/js/highlight.pack.js?1643638253></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=/Automated-Farming/js/modernizr.custom-3.6.0.js?1643638253></script>
<script src=/Automated-Farming/js/learn.js?1643638253></script>
<script src=/Automated-Farming/js/hugo-learn.js?1643638253></script>
<script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0})</script>
</body>
</html>